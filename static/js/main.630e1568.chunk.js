(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(t){t.exports=[{name:"12th St. Oakland City Center",abbr:"12TH",gtfs_latitude:"37.803768",gtfs_longitude:"-122.271450",address:"1245 Broadway",city:"Oakland",county:"alameda",state:"CA",zipcode:"94612"},{name:"16th St. Mission",abbr:"16TH",gtfs_latitude:"37.765062",gtfs_longitude:"-122.419694",address:"2000 Mission Street",city:"San Francisco",county:"sanfrancisco",state:"CA",zipcode:"94110"},{name:"19th St. Oakland",abbr:"19TH",gtfs_latitude:"37.808350",gtfs_longitude:"-122.268602",address:"1900 Broadway",city:"Oakland",county:"alameda",state:"CA",zipcode:"94612"},{name:"24th St. Mission",abbr:"24TH",gtfs_latitude:"37.752470",gtfs_longitude:"-122.418143",address:"2800 Mission Street",city:"San Francisco",county:"sanfrancisco",state:"CA",zipcode:"94110"},{name:"Antioch",abbr:"ANTC",gtfs_latitude:"37.995388",gtfs_longitude:"-121.780420",address:"1600 Slatten Ranch Road",city:"Antioch",county:"Contra Costa",state:"CA",zipcode:"94509"},{name:"Ashby",abbr:"ASHB",gtfs_latitude:"37.852803",gtfs_longitude:"-122.270062",address:"3100 Adeline Street",city:"Berkeley",county:"alameda",state:"CA",zipcode:"94703"},{name:"Balboa Park",abbr:"BALB",gtfs_latitude:"37.721585",gtfs_longitude:"-122.447506",address:"401 Geneva Avenue",city:"San Francisco",county:"sanfrancisco",state:"CA",zipcode:"94112"},{name:"Bay Fair",abbr:"BAYF",gtfs_latitude:"37.696924",gtfs_longitude:"-122.126514",address:"15242 Hesperian Blvd.",city:"San Leandro",county:"alameda",state:"CA",zipcode:"94578"},{name:"Castro Valley",abbr:"CAST",gtfs_latitude:"37.690746",gtfs_longitude:"-122.075602",address:"3301 Norbridge Dr.",city:"Castro Valley",county:"alameda",state:"CA",zipcode:"94546"},{name:"Civic Center/UN Plaza",abbr:"CIVC",gtfs_latitude:"37.779732",gtfs_longitude:"-122.414123",address:"1150 Market Street",city:"San Francisco",county:"sanfrancisco",state:"CA",zipcode:"94102"},{name:"Coliseum",abbr:"COLS",gtfs_latitude:"37.753661",gtfs_longitude:"-122.196869",address:"7200 San Leandro St.",city:"Oakland",county:"alameda",state:"CA",zipcode:"94621"},{name:"Colma",abbr:"COLM",gtfs_latitude:"37.684638",gtfs_longitude:"-122.466233",address:"365 D Street",city:"Colma",county:"sanmateo",state:"CA",zipcode:"94014"},{name:"Concord",abbr:"CONC",gtfs_latitude:"37.973737",gtfs_longitude:"-122.029095",address:"1451 Oakland Avenue",city:"Concord",county:"contracosta",state:"CA",zipcode:"94520"},{name:"Daly City",abbr:"DALY",gtfs_latitude:"37.706121",gtfs_longitude:"-122.469081",address:"500 John Daly Blvd.",city:"Daly City",county:"sanmateo",state:"CA",zipcode:"94014"},{name:"Downtown Berkeley",abbr:"DBRK",gtfs_latitude:"37.870104",gtfs_longitude:"-122.268133",address:"2160 Shattuck Avenue",city:"Berkeley",county:"alameda",state:"CA",zipcode:"94704"},{name:"Dublin/Pleasanton",abbr:"DUBL",gtfs_latitude:"37.701687",gtfs_longitude:"-121.899179",address:"5801 Owens Dr.",city:"Pleasanton",county:"alameda",state:"CA",zipcode:"94588"},{name:"El Cerrito del Norte",abbr:"DELN",gtfs_latitude:"37.925086",gtfs_longitude:"-122.316794",address:"6400 Cutting Blvd.",city:"El Cerrito",county:"contracosta",state:"CA",zipcode:"94530"},{name:"El Cerrito Plaza",abbr:"PLZA",gtfs_latitude:"37.902632",gtfs_longitude:"-122.298904",address:"6699 Fairmount Avenue",city:"El Cerrito",county:"contracosta",state:"CA",zipcode:"94530"},{name:"Embarcadero",abbr:"EMBR",gtfs_latitude:"37.792874",gtfs_longitude:"-122.397020",address:"298 Market Street",city:"San Francisco",county:"sanfrancisco",state:"CA",zipcode:"94111"},{name:"Fremont",abbr:"FRMT",gtfs_latitude:"37.557465",gtfs_longitude:"-121.976608",address:"2000 BART Way",city:"Fremont",county:"alameda",state:"CA",zipcode:"94536"},{name:"Fruitvale",abbr:"FTVL",gtfs_latitude:"37.774836",gtfs_longitude:"-122.224175",address:"3401 East 12th Street",city:"Oakland",county:"alameda",state:"CA",zipcode:"94601"},{name:"Glen Park",abbr:"GLEN",gtfs_latitude:"37.733064",gtfs_longitude:"-122.433817",address:"2901 Diamond Street",city:"San Francisco",county:"sanfrancisco",state:"CA",zipcode:"94131"},{name:"Hayward",abbr:"HAYW",gtfs_latitude:"37.669723",gtfs_longitude:"-122.087018",address:"699 'B' Street",city:"Hayward",county:"alameda",state:"CA",zipcode:"94541"},{name:"Lafayette",abbr:"LAFY",gtfs_latitude:"37.893176",gtfs_longitude:"-122.124630",address:"3601 Deer Hill Road",city:"Lafayette",county:"contracosta",state:"CA",zipcode:"94549"},{name:"Lake Merritt",abbr:"LAKE",gtfs_latitude:"37.797027",gtfs_longitude:"-122.265180",address:"800 Madison Street",city:"Oakland",county:"alameda",state:"CA",zipcode:"94607"},{name:"MacArthur",abbr:"MCAR",gtfs_latitude:"37.829065",gtfs_longitude:"-122.267040",address:"555 40th Street",city:"Oakland",county:"alameda",state:"CA",zipcode:"94609"},{name:"Millbrae",abbr:"MLBR",gtfs_latitude:"37.600271",gtfs_longitude:"-122.386702",address:"200 North Rollins Road",city:"Millbrae",county:"sanmateo",state:"CA",zipcode:"94030"},{name:"Montgomery St.",abbr:"MONT",gtfs_latitude:"37.789405",gtfs_longitude:"-122.401066",address:"598 Market Street",city:"San Francisco",county:"sanfrancisco",state:"CA",zipcode:"94104"},{name:"North Berkeley",abbr:"NBRK",gtfs_latitude:"37.873967",gtfs_longitude:"-122.283440",address:"1750 Sacramento Street",city:"Berkeley",county:"alameda",state:"CA",zipcode:"94702"},{name:"North Concord/Martinez",abbr:"NCON",gtfs_latitude:"38.003193",gtfs_longitude:"-122.024653",address:"3700 Port Chicago Highway",city:"Concord",county:"contracosta",state:"CA",zipcode:"94520"},{name:"Oakland International Airport",abbr:"OAKL",gtfs_latitude:"37.713238",gtfs_longitude:"-122.212191",address:"4 Airport Drive",city:"Oakland",county:"alameda",state:"CA",zipcode:"94621"},{name:"Orinda",abbr:"ORIN",gtfs_latitude:"37.878361",gtfs_longitude:"-122.183791",address:"11 Camino Pablo",city:"Orinda",county:"contracosta",state:"CA",zipcode:"94563"},{name:"Pittsburg/Bay Point",abbr:"PITT",gtfs_latitude:"38.018914",gtfs_longitude:"-121.945154",address:"1700 West Leland Road",city:"Pittsburg",county:"contracosta",state:"CA",zipcode:"94565"},{name:"Pittsburg Center",abbr:"PCTR",gtfs_latitude:"38.016941",gtfs_longitude:"-121.889457",address:"2099 Railroad Avenue",city:"Pittsburg",county:"Contra Costa",state:"CA",zipcode:"94565"},{name:"Pleasant Hill/Contra Costa Centre",abbr:"PHIL",gtfs_latitude:"37.928468",gtfs_longitude:"-122.056012",address:"1365 Treat Blvd.",city:"Walnut Creek",county:"contracosta",state:"CA",zipcode:"94597"},{name:"Powell St.",abbr:"POWL",gtfs_latitude:"37.784471",gtfs_longitude:"-122.407974",address:"899 Market Street",city:"San Francisco",county:"sanfrancisco",state:"CA",zipcode:"94102"},{name:"Richmond",abbr:"RICH",gtfs_latitude:"37.936853",gtfs_longitude:"-122.353099",address:"1700 Nevin Avenue",city:"Richmond",county:"contracosta",state:"CA",zipcode:"94801"},{name:"Rockridge",abbr:"ROCK",gtfs_latitude:"37.844702",gtfs_longitude:"-122.251371",address:"5660 College Avenue",city:"Oakland",county:"alameda",state:"CA",zipcode:"94618"},{name:"San Bruno",abbr:"SBRN",gtfs_latitude:"37.637761",gtfs_longitude:"-122.416287",address:"1151 Huntington Avenue",city:"San Bruno",county:"sanmateo",state:"CA",zipcode:"94066"},{name:"San Francisco International Airport",abbr:"SFIA",gtfs_latitude:"37.615966",gtfs_longitude:"-122.392409",address:"International Terminal, Level 3",city:"San Francisco Int'l Airport",county:"sanmateo",state:"CA",zipcode:"94128"},{name:"San Leandro",abbr:"SANL",gtfs_latitude:"37.721947",gtfs_longitude:"-122.160844",address:"1401 San Leandro Blvd.",city:"San Leandro",county:"alameda",state:"CA",zipcode:"94577"},{name:"South Hayward",abbr:"SHAY",gtfs_latitude:"37.634375",gtfs_longitude:"-122.057189",address:"28601 Dixon Street",city:"Hayward",county:"alameda",state:"CA",zipcode:"94544"},{name:"South San Francisco",abbr:"SSAN",gtfs_latitude:"37.664245",gtfs_longitude:"-122.443960",address:"1333 Mission Road",city:"South San Francisco",county:"sanmateo",state:"CA",zipcode:"94080"},{name:"Union City",abbr:"UCTY",gtfs_latitude:"37.590630",gtfs_longitude:"-122.017388",address:"10 Union Square",city:"Union City",county:"alameda",state:"CA",zipcode:"94587"},{name:"Walnut Creek",abbr:"WCRK",gtfs_latitude:"37.905522",gtfs_longitude:"-122.067527",address:"200 Ygnacio Valley Road",city:"Walnut Creek",county:"contracosta",state:"CA",zipcode:"94596"},{name:"Warm Springs/South Fremont",abbr:"WARM",gtfs_latitude:"37.502171",gtfs_longitude:"-121.939313",address:"45193 Warm Springs Blvd",city:"Fremont",county:"alameda",state:"CA",zipcode:"94539"},{name:"West Dublin/Pleasanton",abbr:"WDUB",gtfs_latitude:"37.699756",gtfs_longitude:"-121.928240",address:"6501 Golden Gate Drive",city:"Dublin",county:"alameda",state:"CA",zipcode:"94568"},{name:"West Oakland",abbr:"WOAK",gtfs_latitude:"37.804872",gtfs_longitude:"-122.295140",address:"1451 7th Street",city:"Oakland",county:"alameda",state:"CA",zipcode:"94607"}]},38:function(t){t.exports=[{name:"Antioch - SFIA/Millbrae",abbr:"ANTC-SFIA",routeID:"ROUTE 1",number:"1",origin:"ANTC",destination:"SFIA",direction:"South",hexcolor:"#ffff33",color:"YELLOW",holidays:"1",num_stns:"28",config:{station:["ANTC","PCTR","PITT","NCON","CONC","PHIL","WCRK","LAFY","ORIN","ROCK","MCAR","19TH","12TH","WOAK","EMBR","MONT","POWL","CIVC","16TH","24TH","GLEN","BALB","DALY","COLM","SSAN","SBRN","SFIA","MLBR"]}},{name:"Millbrae/SFIA - Antioch",abbr:"SFIA-ANTC",routeID:"ROUTE 2",number:"2",origin:"SFIA",destination:"ANTC",direction:"North",hexcolor:"#ffff33",color:"YELLOW",holidays:"1",num_stns:"28",config:{station:["MLBR","SFIA","SBRN","SSAN","COLM","DALY","BALB","GLEN","24TH","16TH","CIVC","POWL","MONT","EMBR","WOAK","12TH","19TH","MCAR","ROCK","ORIN","LAFY","WCRK","PHIL","CONC","NCON","PITT","PCTR","ANTC"]}},{name:"Warm Springs/South Fremont - Richmond",abbr:"WARM-RICH",routeID:"ROUTE 3",number:"3",origin:"WARM",destination:"RICH",direction:"North",hexcolor:"#ff9933",color:"ORANGE",holidays:"1",num_stns:"19",config:{station:["WARM","FRMT","UCTY","SHAY","HAYW","BAYF","SANL","COLS","FTVL","LAKE","12TH","19TH","MCAR","ASHB","DBRK","NBRK","PLZA","DELN","RICH"]}},{name:"Richmond - Warm Springs/South Fremont",abbr:"RICH-WARM",routeID:"ROUTE 4",number:"4",origin:"RICH",destination:"WARM",direction:"South",hexcolor:"#ff9933",color:"ORANGE",holidays:"1",num_stns:"19",config:{station:["RICH","DELN","PLZA","NBRK","DBRK","ASHB","MCAR","19TH","12TH","LAKE","FTVL","COLS","SANL","BAYF","HAYW","SHAY","UCTY","FRMT","WARM"]}},{name:"Warm Springs/South Fremont - Daly City",abbr:"WARM-DALY",routeID:"ROUTE 5",number:"5",origin:"WARM",destination:"DALY",direction:"North",hexcolor:"#339933",color:"GREEN",holidays:"0",num_stns:"20",config:{station:["WARM","FRMT","UCTY","SHAY","HAYW","BAYF","SANL","COLS","FTVL","LAKE","WOAK","EMBR","MONT","POWL","CIVC","16TH","24TH","GLEN","BALB","DALY"]}},{name:"Daly City - Warm Springs/South Fremont",abbr:"DALY-WARM",routeID:"ROUTE 6",number:"6",origin:"DALY",destination:"WARM",direction:"South",hexcolor:"#339933",color:"GREEN",holidays:"0",num_stns:"20",config:{station:["DALY","BALB","GLEN","24TH","16TH","CIVC","POWL","MONT","EMBR","WOAK","LAKE","FTVL","COLS","SANL","BAYF","HAYW","SHAY","UCTY","FRMT","WARM"]}},{name:"Richmond - Daly City/Millbrae",abbr:"RICH-MLBR",routeID:"ROUTE 7",number:"7",origin:"RICH",destination:"MLBR",direction:"South",hexcolor:"#ff0000",color:"RED",holidays:"0",num_stns:"23",config:{station:["RICH","DELN","PLZA","NBRK","DBRK","ASHB","MCAR","19TH","12TH","WOAK","EMBR","MONT","POWL","CIVC","16TH","24TH","GLEN","BALB","DALY","COLM","SSAN","SBRN","MLBR"]}},{name:"Millbrae/Daly City - Richmond",abbr:"MLBR-RICH",routeID:"ROUTE 8",number:"8",origin:"MLBR",destination:"RICH",direction:"North",hexcolor:"#ff0000",color:"RED",holidays:"0",num_stns:"23",config:{station:["MLBR","SBRN","SSAN","COLM","DALY","BALB","GLEN","24TH","16TH","CIVC","POWL","MONT","EMBR","WOAK","12TH","19TH","MCAR","ASHB","DBRK","NBRK","PLZA","DELN","RICH"]}},{name:"Dublin/Pleasanton - MacArthur",abbr:"DUBL-MCAR",routeID:"ROUTE 9",number:"9",origin:"DUBL",destination:"MCAR",direction:"South",hexcolor:"#0099cc",color:"BLUE",holidays:"1",num_stns:"11",config:{station:["DUBL","WDUB","CAST","BAYF","SANL","COLS","FTVL","LAKE","12TH","19TH","MCAR"]}},{name:"MacArthur - Dublin/Pleasanton",abbr:"MCAR-DUBL",routeID:"ROUTE 10",number:"10",origin:"MCAR",destination:"DUBL",direction:"North",hexcolor:"#0099cc",color:"BLUE",holidays:"1",num_stns:"11",config:{station:["MCAR","19TH","12TH","LAKE","FTVL","COLS","SANL","BAYF","CAST","WDUB","DUBL"]}},{name:"Dublin/Pleasanton - Daly City",abbr:"DUBL-DALY",routeID:"ROUTE 11",number:"11",origin:"DUBL",destination:"DALY",direction:"South",hexcolor:"#0099cc",color:"BLUE",holidays:"1",num_stns:"18",config:{station:["DUBL","WDUB","CAST","BAYF","SANL","COLS","FTVL","LAKE","WOAK","EMBR","MONT","POWL","CIVC","16TH","24TH","GLEN","BALB","DALY"]}},{name:"Daly City - Dublin/Pleasanton",abbr:"DALY-DUBL",routeID:"ROUTE 12",number:"12",origin:"DALY",destination:"DUBL",direction:"North",hexcolor:"#0099cc",color:"BLUE",holidays:"1",num_stns:"18",config:{station:["DALY","BALB","GLEN","24TH","16TH","CIVC","POWL","MONT","EMBR","WOAK","LAKE","FTVL","COLS","SANL","BAYF","CAST","WDUB","DUBL"]}},{name:"Millbrae - SFO",abbr:"MLBR-SFIA",routeID:"ROUTE 13",number:"13",origin:"MLBR",destination:"SFIA",direction:"North",hexcolor:"#c463c5",color:"",holidays:"1",num_stns:"2",config:{station:["MLBR","SFIA"]}},{name:"SFO - Millbrae",abbr:"SFIA-MLBR",routeID:"ROUTE 14",number:"14",origin:"SFIA",destination:"MLBR",direction:"South",hexcolor:"#c463c5",color:"",holidays:"1",num_stns:"2",config:{station:["SFIA","MLBR"]}},{name:"Oakland Airport - Coliseum",abbr:"OAKL-COLS",routeID:"ROUTE 19",number:"19",origin:"OAKL",destination:"COLS",direction:"North",hexcolor:"#d5cfa3",color:"BEIGE",holidays:"1",num_stns:"2",config:{station:["OAKL","COLS"]}},{name:"Coliseum - Oakland Airport",abbr:"COLS-OAKL",routeID:"ROUTE 20",number:"20",origin:"COLS",destination:"OAKL",direction:"South",hexcolor:"#d5cfa3",color:"BEIGE",holidays:"1",num_stns:"2",config:{station:["COLS","OAKL"]}}]},40:function(t,e,n){t.exports=n(58)},50:function(t,e,n){},58:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),r=n(17),o=n.n(r),s=n(14),c=n(10),d=n(11),l=n(20),u=n.n(l),m=(n(50),n(8)),g=n(35),f=n(36),b="UPDATE_SETTINGS",A=function(t){return{type:b,payload:t}},h=n(12),C=window.location.protocol+"//api.bart.gov/api/",y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"".concat(C,"etd.aspx?cmd=etd&orig=").concat(t).concat(e?"&dir="+e[0].toLowerCase():"","&key=").concat("MW9S-E7SL-26DU-VV8V&","&json=y")},p="".concat(C,"bsa.aspx?cmd=bsa&key=").concat("MW9S-E7SL-26DU-VV8V&","&json=y"),E=function(t){if(t.status>=200&&t.status<300)return t;var e=new Error(t.statusText);throw e.response=t,e},O=[["24th Mission",32,"24TH"],["16th Mission",30,"16TH"],["Civic Center",28,"CIVC"],["Powell",26,"POWL"],["Montgomery",25,"MONT"],["Embarcadero",23,"EMBR"],["West Oakland",16,"WOAK"],["12th",13,"12TH"],["19th",11,"19TH"],["MacArthur",8,"MCAR"],["Ashby",5,"ASHB"],["Berkeley",2,"DBRK"],["North Berkeley",0,"NBRK"]],R=function(t){return t*(Math.PI/180)},S=function(t,e){var n=Object(h.a)(t,2),a=n[0],i=n[1],r=Object(h.a)(e,2),o=r[0],s=r[1];i=R(i),a=R(a),s=R(s);var c=(o=R(o))-a,d=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(i/2+Math.PI/4));return Math.abs(c)>Math.PI&&(c=c>0?-(2*Math.PI-c):2*Math.PI+c),(Math.atan2(c,d)*(180/Math.PI)+360)%360},L=[{preset:"home2Work",currentBartStation:"NBRK",bartDestination:"MONT",bartMinutes:25,bartDirection:"South",walkingMinutes:5},{preset:"work2Home",currentBartStation:"MONT",bartDestination:"NBRK",bartMinutes:25,bartDirection:"North",trainColors:["RED","YELLOW"],walkingMinutes:9}],v="REQUEST_STATION_ETDS",T="RECEIVE_STATION_ETDS",M="RECEIVE_STATION_ETDS_ERROR";function B(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,a){n(function(t,e){return{type:v,meta:{station:t,dir:e}}}(t,e));var i=y(t,e);return fetch(i).then(E).then(function(t){return t.json()}).then(function(a){return n(function(t,e,n){return{type:T,meta:{station:t,dir:e},payload:n}}(t,e,a))}).catch(function(a){return n(function(t,e,n){return console.error(n),{type:M,meta:{station:t,dir:e},error:n}}(t,e,a))})}}var _="REQUEST_BART_ADVISORIES",N="RECEIVE_BART_ADVISORIES",D="RECEIVE_BART_ADVISORIES_ERROR";function I(t){return function(t,e){return t({type:_}),fetch(p).then(E).then(function(t){return t.json()}).then(function(e){return t({type:N,payload:e})}).catch(function(e){return t((n=e,console.error(n),{type:D,error:n}));var n})}}var F="REQUEST_USER_LOCATION",H="RECEIVE_USER_LOCATION",k="RECEIVE_USER_LOCATION_ERROR";var W=(new Date).getHours()<12?"home2Work":"work2Home",w=L.find(function(t){return t.preset===W});var j=n(13),U={isFetching:!0,error:!1},P={};var Y={bartAdvisories:void 0,isFetching:!0,error:!1};var z={position:void 0,isFetching:!1,error:!1};var K=Object(m.c)({settings:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case b:return Object.assign({},t,e.payload);default:return t}},stationETDs:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case v:var n=e.meta.station,a=Object.assign(t[n]||U,{isFetching:!0});return Object.assign({},t,Object(j.a)({},n,a));case T:var i=e.payload.root,r=i.date,o=i.time,s=Object(h.a)(i.station,1)[0].etd,c=u()(r+o,"MM/DD/YYYYHH:mm:ss a"),d={isFetching:!1,trains:s.reduce(function(t,e){var n=e.destination,a=e.abbreviation,i=e.limited,r=e.estimate;return t.concat(r.map(function(t){var e="Leaving"===t.minutes?0:parseInt(t.minutes,10);return Object.assign(t,{destination:n,abbreviation:a,limited:i,intMinutes:e,at:c.clone().add(e,"minutes")})}))},[]).sort(function(t,e){return t.at.diff(e.at)}),at:c};return Object.assign({},t,Object(j.a)({},e.meta.station,d));case M:var l=Object.assign({},t[e.meta.station],{error:e.error});return Object.assign({},t,Object(j.a)({},e.meta.station,l));default:return t}},bartAdvisories:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case _:return Object.assign({},t,Y,{isFetching:!0,error:!1});case N:return Object.assign({},t,{bartAdvisories:e.payload.root.bsa.map(function(t){return t.description["#cdata-section"]}),isFetching:!1,error:!1});case D:return Object.assign({},t,{isFetching:!1,error:e.error});default:return t}},userLocation:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case F:return Object.assign({},t,{isFetching:!0,error:!1});case H:return Object.assign({},t,{position:e.payload,isFetching:!1,error:!1});case k:return Object.assign({},t,{isFetching:!1,error:e.error});default:return t}}});var V=n(21),x=n(22),G=n(25),Z=n(23),J=n(24),Q=n(9),q=Object(Q.a)(function(t){return t.stationETDs},function(t){return t.settings},function(t,e){var n=e.currentBartStation,a=(e.bartDirection,e.trainColors),i=e.bartMinutes,r=e.walkingMinutes;return t[n]&&t[n].trains?{at:t[n].at,trains:t[n].trains.filter(function(t){return!a||a.includes(t.color)}).map(function(t){return Object.assign({},t,{etd:t.at.clone().add(i+r,"minutes")})}),isFetching:t[n].isFetching}:{isFetching:!0}}),$=Object(Q.a)(function(t){return t.stationETDs},function(t,e){var n=["12TH","19TH","MCAR"],a={colors:["ORANGE","RED"],direction:"North"},i={colors:["YELLOW"],direction:"North"};if(n.some(function(e){return!t[e]||!t[e].trains}))return{isFetching:!0};var r=t[n[0]].trains.map(function(e){var a=n.reduce(function(n,a){var i=t[a].trains.find(function(t){return t.destination===e.destination&&t.length===e.length&&t.intMinutes>=e.intMinutes});return i?n.concat({station:a,at:i.at,intMinutes:i.intMinutes}):n},[]);return{train:e,stations:a}});return{isFetching:!1,targetTrains:r.filter(function(t){return a.colors.includes(t.train.color)&&t.train.direction===a.direction}),sourceTrains:r.filter(function(t){return i.colors.includes(t.train.color)&&t.train.direction===i.direction}),stations:n.map(function(e){return{station:e,targetTrains:t[e].trains.filter(function(t){return a.colors.includes(t.color)&&t.direction===a.direction}),sourceTrains:t[e].trains.filter(function(t){return i.colors.includes(t.color)&&t.direction===i.direction})}})}}),X=n(29),tt=n(3),et=n(37),nt=n(38),at=et.map(function(t){return Object.assign({},t,{lat:parseFloat(t.gtfs_latitude),lon:parseFloat(t.gtfs_longitude)})}),it=at.reduce(function(t,e){return Object.assign(t,Object(j.a)({},e.abbr,e))},{});at.forEach(function(t){var e=t.abbr,n=nt.reduce(function(t,n){var a=n.config.station,i=a.indexOf(e);return-1===i?t:0===i?t.concat(a[1]):i===a.length-1?t.concat(a[a.length-2]):t.concat([a[i-1],a[i+1]])},[]);t.adjacencies=Array.from(new Set(n)).reduce(function(e,n){return Object.assign(e,Object(j.a)({},n,{distance:Object(X.a)([t.lon,t.lat],[it[n].lon,it[n].lat]),bearing:S([t.lon,t.lat],[it[n].lon,it[n].lat])}))},{})}),console.log(at);var rt=Object(Q.a)(function(t){return t.userLocation},function(t){if(t.isFetching)return{isFetching:!0};var e=t.position,n=e.coords,a=n.latitude,i=n.longitude,r=e.timestamp;return{isFetching:!1,distanceToStations:at.map(function(t){return Object.assign({},t,{distance:Object(X.a)([t.lon,t.lat],[i,a]),bearing:S([t.lon,t.lat],[i,a])})}),timestamp:r}}),ot=(Object(Q.a)(rt,function(t){if(t.isFetching)return{isFetching:!0};var e=Object(tt.b)(t.distanceToStations,function(t){return t.distance});return{isFetching:!1,closestStation:t.find(function(t){return t.distance===e})}}),function(t){function e(){var t,n;Object(V.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(G.a)(this,(t=Object(Z.a)(e)).call.apply(t,[this].concat(i)))).state={timer:null,counter:0},n.handleReload=function(t){return n.load()},n.tick=function(){n.setState({counter:n.state.counter+1})},n.switchPreset=function(){var t=L.find(function(t){return t.preset!==n.props.settings.preset});n.props.dispatch(A(t)),n.props.dispatch(B(t.currentBartStation,t.bartDirection))},n}return Object(J.a)(e,t),Object(x.a)(e,[{key:"componentDidMount",value:function(){this.load(),this.setState({timer:setInterval(this.tick,3e3)})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.timer)}},{key:"load",value:function(){this.props.dispatch(B(this.props.settings.currentBartStation,this.props.settings.bartDirection)),this.props.dispatch(I())}},{key:"render",value:function(){var t=this.props,e=t.settings,n=e.preset,a=e.currentBartStation,r=e.bartDirection,o=e.walkingMinutes,s=e.bartMinutes,d=t.stationETDs,l=t.bartAdvisories;return i.a.createElement("div",{className:"bart-home"},i.a.createElement("div",{className:"top-menu"},i.a.createElement("div",null,"preset: ",n," ",i.a.createElement("button",{onClick:this.switchPreset},"switch")),i.a.createElement(c.b,{to:"/transfer-magic"},"Transfer!")),i.a.createElement("div",{className:"bart-trains"},d.trains&&i.a.createElement("div",{id:"bart-trains"},d.trains.map(function(t,e){t.minutes,t.platform,t.direction;var n=t.length,a=(t.color,t.hexcolor),r=(t.bikeflag,t.delay,t.destination),o=(t.abbreviation,t.limited,t.at),s=t.etd;return i.a.createElement("div",{className:"train",key:e},i.a.createElement("span",{className:"color",style:{backgroundColor:a}})," ",i.a.createElement("span",{className:"minutes"},o.fromNow(!0))," ",i.a.createElement("span",{className:"destination"},r)," ",i.a.createElement("span",{className:"length"},n," car")," ",i.a.createElement("span",{className:"home-time"},s.format("h:mm a")))}))),i.a.createElement("div",{id:"bart-advisories"},i.a.createElement("a",{href:"http://m.bart.gov/schedules/advisories"},"BART Advisories"),":"," ",l.isFetching&&i.a.createElement("span",{className:"loading"},"loading advisories"),l.bartAdvisories&&i.a.createElement("span",{id:"bart-advisory-list"},l.bartAdvisories.map(function(t,e){return i.a.createElement("span",{key:e},t)}))),i.a.createElement("div",{className:"data-freshness"},d.isFetching&&i.a.createElement("span",{className:"loading"},"loading ",a," ",r," trains"),!d.isFetching&&i.a.createElement("span",{className:"status"},a," ",r," trains"," ",d.at.fromNow()),i.a.createElement("button",{onClick:this.handleReload},"Reload")),i.a.createElement("div",{id:"en-route-times"},i.a.createElement("ul",{id:"bart-station-times"},O.map(function(t){var e=Object(h.a)(t,3),n=e[0],a=e[1],r=e[2];return i.a.createElement("li",{key:r},i.a.createElement("a",{href:"https://m.bart.gov/schedules/eta?stn=".concat(r)},n),": ",a," mins")}))),i.a.createElement("p",{id:"estimate-info"},"Arrival estimates include ",s," minutes on train and"," ",o," minutes on foot."))}}]),e}(a.Component)),st=Object(s.b)(function(t){return{settings:t.settings,stationETDs:q(t),bartAdvisories:t.bartAdvisories}})(ot),ct=function(t){function e(){var t,n;Object(V.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(G.a)(this,(t=Object(Z.a)(e)).call.apply(t,[this].concat(i)))).state={},n.handleReload=function(t){return n.load()},n}return Object(J.a)(e,t),Object(x.a)(e,[{key:"componentWillMount",value:function(){this.load()}},{key:"load",value:function(){this.props.dispatch(B("12TH","North")),this.props.dispatch(B("19TH","North")),this.props.dispatch(B("MCAR","North"))}},{key:"render",value:function(){var t=this.props.transferMagicData,e=t.isFetching,n=t.targetTrains,a=t.sourceTrains,r=t.stations;return e?i.a.createElement("div",{className:"loading"},"loading"):i.a.createElement("div",{className:"transfer-magic"},i.a.createElement(c.b,{to:"/"},"Home"),i.a.createElement("div",{className:"stations"},r.map(function(t){var e=t.station,n=t.targetTrains,a=t.sourceTrains;return i.a.createElement("div",{key:e,className:"station"},i.a.createElement("div",null,i.a.createElement("a",{href:"https://m.bart.gov/schedules/eta?stn=".concat(e)},e)),i.a.createElement("div",null,"source: ",a.map(function(t){return t.intMinutes}).join(", ")),i.a.createElement("div",null,"target:"," ",n.filter(function(t){return t.intMinutes>=a[0].intMinutes}).map(function(t){return t.intMinutes}).join(", ")))})),i.a.createElement("div",null,i.a.createElement("h2",null,"Targets:"),n.map(function(t,e){var n=t.train,a=t.stations;return i.a.createElement("div",{key:e},i.a.createElement("div",{className:"train"},i.a.createElement("span",{className:"color",style:{backgroundColor:n.hexcolor}})," ",n.destination),a.map(function(t){var e=t.station,n=(t.at,t.intMinutes);return i.a.createElement("div",{key:e},e," ",n)}))})),i.a.createElement("div",null,i.a.createElement("h2",null,"Sources:"),a.map(function(t,e){var n=t.train,a=t.stations;return i.a.createElement("div",{className:"train",key:e},i.a.createElement("h3",null," ",i.a.createElement("span",{className:"color",style:{backgroundColor:n.hexcolor}})," ",n.destination),a.map(function(t){var e=t.station,n=(t.at,t.intMinutes);return i.a.createElement("div",{key:e},e," ",n)}))})),i.a.createElement("div",null,i.a.createElement(c.b,{to:"/transfer-magic"},"Back")))}}]),e}(a.Component),dt=Object(s.b)(function(t){return{transferMagicData:$(t)}})(ct),lt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ut(t){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(t){console.error("Error during service worker registration:",t)})}u.a.updateLocale("en",{relativeTime:{s:"%d seconds"}});var mt=function(t,e){var n=window.devToolsExtension?window.devToolsExtension()(m.d):m.d;return Object(m.a)(f.a,Object(g.routerMiddleware)(t))(n)(K,e)}();o.a.render(i.a.createElement(s.a,{store:mt},i.a.createElement(c.a,null,i.a.createElement("div",{className:"App"},i.a.createElement(d.a,{exact:!0,path:"/",component:st}),i.a.createElement(d.a,{exact:!0,path:"/transfer-magic",component:dt})))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");lt?function(t){fetch(t).then(function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):ut(t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t):ut(t)})}}()}},[[40,1,2]]]);
//# sourceMappingURL=main.630e1568.chunk.js.map